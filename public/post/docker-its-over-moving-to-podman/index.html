<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
    <title>Docker it&#39;s over, moving to podman · breadNET</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <link rel="stylesheet" href="http://localhost:1313/style.main.min.b98e12e6b4acb157747422458845caf0880e6eda788e2e2ee3ecc617a0e9bfc3.css" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    
    <script src="http://localhost:1313/js/sticky-nav-title.min.7c74baa114d72c67b1f5c85f55da35fa76c686efef35103f409f57f6bf3f9057.js" integrity="sha256-fHS6oRTXLGex9chfVdo1&#43;nbGhu/vNRA/QJ9X9r8/kFc="></script>


</head>
<body class=" post-template ">

    <div class="site-wrapper">

<header class="site-header"><div class="outer site-nav-main">
    <div class="inner"><nav class="site-nav">
    <div class="site-nav-left">
        
        <a class="site-nav-logo" href="http://localhost:1313/">breadNET</a>
        

        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem">
                    <a href="/">HOME</a>
                </li>
                
                <li class="nav-home" role="menuitem">
                    <a href="/my-setup">MY SETUP</a>
                </li>
                
                <li class="nav-home" role="menuitem">
                    <a href="/story">THE STORY</a>
                </li>
                
            </ul>

            
            <span class="nav-post-title dash">Docker it&#39;s over, moving to podman</span>
            
        </div>
    </div>

    <div class="site-nav-right">
        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem">
                    <a href="https://www.linkedin.com/in/bradley-stannard/">Linkedin</a>
                </li>
                
                <li class="nav-home" role="menuitem">
                    <a href="https://documentation.breadnet.co.uk/?mtm_campaign=breadnet&amp;mtm_kwd=navbar">Documentation</a>
                </li>
                
                <li class="nav-home" role="menuitem">
                    <a href="mailto:webmaster@breadnet.co.uk">Contact</a>
                </li>
                
                <li class="nav-home" role="menuitem">
                    <a href="https://github.com/userbradley">GitHub</a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>
</div>
</div><script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.Casper && window.Casper.stickyNavTitle) {
                window.Casper.stickyNavTitle({
                    navSelector: '.site-nav-main',
                    titleSelector: '.post-full-title',
                    activeClass: 'nav-post-title-active'
                });
            }
        });
    </script>
</header>

<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post ">

            <header class="post-full-header">

                

                <h1 class="post-full-title">Docker it&#39;s over, moving to podman</h1>

                
                    <p class="post-full-custom-excerpt">Docker, we&rsquo;re breaking up! Tips on moving to podman</p>
                

                <div class="post-full-byline">
                    <section class="post-full-byline-content">

                        

                        <section class="post-full-byline-meta">
                            
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2023-114-04">19 April 2023</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 5 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            
            <figure class="post-full-image">
                <img src="https://images.unsplash.com/photo-1633967920376-33b2d94f091f?q=80&amp;w=1740&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.1.0&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Docker it&#39;s over, moving to podman" />
            </figure>
            

            <section class="post-full-content">
                <div class="post-content">
                    <p>Docker is cool, don&rsquo;t get me wrong. They pretty much brought containerization to the masses.</p>
<p>So why the breakup letter? What pushed you over the edge</p>
<ol>
<li><a href="https://boxboat.com/2018/12/07/docker-ce-vs-docker-ee/">2017: Licensing changes </a></li>
<li><a href="https://www.docker.com/pricing/october-2022-pricing-change-faq/">Docker hub pricing changes</a></li>
<li><a href="https://www.bleepingcomputer.com/news/security/docker-hub-repositories-hide-over-1-650-malicious-containers/">Malware hosted on docker</a></li>
<li><a href="https://www.docker.com/pricing/october-2022-pricing-change-faq/#:~:text=On%20October%2027%2C%202022%2C%20Docker,">Price changes 2022</a>%2C%20per%20user%20per%20month)</li>
<li><a href="https://www.infoworld.com/article/3630393/docker-desktop-is-no-longer-free-for-enterprise-users.html">Docker Desktop pricing</a></li>
<li><a href="https://docs.docker.com/docker-hub/download-rate-limit">Rate limit</a></li>
<li><a href="https://www.docker.com/blog/no-longer-sunsetting-the-free-team-plan/">Docker free teams being sunsetted (and then saying sorry for bad comms, and then actually saying sorry and no longer doing it)</a></li>
</ol>
<p>Sure, most of these above points are about money, but the docker desktop and docker hub ones annoyed me the most</p>
<p>💡</p>
<p>I will get on to installing podman and how to use it later on in this blog
we just need to talk a bit about docker and podman.</p>
<p>Specifically, on mac <a href="https://survey.stackoverflow.co/2022/#section-most-popular-technologies-operating-system">(which has 32% market share on devs)</a> you can only install docker using the desktop CLI. If you then use it for work, you need to pay.</p>
<p>Of course I am still yet to see Docker Inc take a company to court for not paying for licenses.</p>
<h2 id="so-why-podman-why-switch">So why podman? Why switch?</h2>
<p>The real reason I switched was because I broke my docker install so much, that it was easier to switch to a new container runtime <em>thing</em> on my computer, than it was to try fix it.</p>
<p>Having a search about, I came across a blog from Michael Friedrich
[</p>
<p>Docker Desktop alternatives on macOS: podman, nerdctl, Rancher Desktop</p>
<p>Docker changed its subscription model including Docker Desktop, thus generatingmore demand for alternatives. In this blog post, we look into podman, nerdctl,and Rancher Desktop as Docker Desktop alternatives on macOS. The Docker Desktop subscription changes[https://www.docker.com/blog/updating-…</p>
<p><img src="https://dnsmichi.at/favicon.ico" alt="">dnsmichi.atMichael Friedrich</p>
<p><img src="https://dnsmichi.at/content/images/2022/03/AC6BA369-E613-464F-AEB7-CCA674DC61BE.jpeg" alt="">
](<a href="https://dnsmichi.at/2022/03/15/docker-desktop-alternatives-macos-podman-nerdctl-rancher-desktop/?utm_source&amp;#x3D;breadnet-co-uk&amp;amp;utm_medium&amp;#x3D;Docker-its-over-moving-to-podman">https://dnsmichi.at/2022/03/15/docker-desktop-alternatives-macos-podman-nerdctl-rancher-desktop/?utm_source&amp;#x3D;breadnet-co-uk&amp;amp;utm_medium&amp;#x3D;Docker-its-over-moving-to-podman</a>)
One of his suggestions was podman, so I turned away from the spike I was working on (Configuring Hound) and put all the time in to getting podman working on my laptop</p>
<h1 id="the-install-process">The install process</h1>
<p>📬</p>
<p>I am going to assume that you don&rsquo;t need me to explain what podman is and what docker is, if you are reading this post</p>
<p>For context, I am using an M1 mac - Which requires some additional configuration.</p>
<pre><code>brew install podman
podman machine init
podman machine start
</code></pre>
<p>That&rsquo;s pretty much it.</p>
<p>Podman will <em>hijack</em> your docker config file, so stuff like authentication to google cloud artifact registry and custom registries are <strong>just going to work</strong></p>
<p>Something to note is that if you plan to run containers with local volumes, you will need to change your init command to the below</p>
<pre><code>podman machine init --now --cpus=4 --memory=2046 -v $HOME:$HOME
</code></pre>
<h1 id="i-miss-things-about-docker">I miss things about docker</h1>
<p>This is normal, for the past 10 years you&rsquo;ve been typing <code>docker</code> and <code>docker-compose</code></p>
<p>Firstly we will take care of <code>docker-compose</code> as podman has it&rsquo;s own compose tool.
[</p>
<p>GitHub - containers/podman-compose: a script to run docker-compose.yml using podman</p>
<p>a script to run docker-compose.yml using podman. Contribute to containers/podman-compose development by creating an account on GitHub.</p>
<p><img src="https://github.com/fluidicon.png" alt="">GitHubcontainers</p>
<p><img src="https://opengraph.githubassets.com/feddadaf0941e1f1c56e0d8857ead38a124850f7d0dd0f6668371a29e3c8c76a/containers/podman-compose" alt="">
](<a href="https://github.com/containers/podman-compose">https://github.com/containers/podman-compose</a>)
It&rsquo;s called&hellip; <code>podman-compose</code></p>
<pre><code>brew install podman-compose
</code></pre>
<h3 id="aliasing-stuff">Aliasing stuff</h3>
<p>edit your <code>~/.zshrc</code> or <code>~/.bashrc</code> file and add the below in</p>
<pre><code>alias &quot;docker&quot;=&quot;podman&quot;
alias &quot;docker-compose&quot;=&quot;podman-compose&quot;
</code></pre>
<p>Then update your source</p>
<pre><code>source ~/.zshrc
</code></pre>
<p>Any time you invoke <code>docker</code> or <code>docker-compose</code> it will just be podman sitting back there running for you!</p>
<h3 id="podman-desktop">Podman Desktop</h3>
<pre><code>brew install podman-desktop
</code></pre>
<p><img src="__GHOST_URL__/content/images/2023/04/image.png" alt=""></p>
<h1 id="what-is-it-actually-like-to-live-with">What is it actually like to live with?</h1>
<p>I have been using podman since the 27th of march, and I have to say I am impressed.</p>
<p>At work, I am the only person using podman, so support is non existant. This also raises a very important factor of adopting podman</p>
<blockquote>
<p>If my team uses docker, can I change with no affect to my productivity</p></blockquote>
<p>The answer: Sort of</p>
<h3 id="the-good">The good</h3>
<ul>
<li>It works with google artifact registry using my docker <code>config.json</code> file right off the bat</li>
<li>Docker pulls default to <code>docker.io/library</code> so you don&rsquo;t have to change pulling images</li>
<li>Pulling images from other registries is as you expect, un-changed.</li>
</ul>
<h3 id="the-not-so-good">The not so good</h3>
<ul>
<li>Configuration is annoying</li>
<li>Takes a few extra seconds to spin up a container</li>
<li>Resources are limited by the VM that runs the containers, so lots of running containers = some are slow</li>
<li>Skaffold does not work</li>
</ul>
<p>I am going to elaborate on the bad ones, as this is going to be your deciding factor on if you move or not</p>
<h4 id="configuration-is-annoying">Configuration is annoying</h4>
<p>Because of the VM that podman runs containers in, you have to SSH in to the machine, and make the changes in nano or vi/vim. This gets quite annoying after about 3 minutes.</p>
<h4 id="takes-a-few-extra-seconds-to-spin-up-a-container">Takes a few extra seconds to spin up a container</h4>
<p>I have not been able to do a side by side comparison (my docker is borked) but running something like the below, just <em><strong>feels</strong></em> slower.</p>
<pre><code>podman run -it alpine /bin/sh
</code></pre>
<h4 id="resources-are-limited-by-the-vm">Resources are limited by the vm</h4>
<p>This is self explanatory. It&rsquo;s actually the same on docker, if you have a look on the docker Desktop app, it&rsquo;s there. The only reason I raise it here is because we&rsquo;re manually setting it, so we see it
<img src="__GHOST_URL__/content/images/2023/04/image-1.png" alt=""></p>
<h4 id="skaffold-does-not-work">Skaffold does not work</h4>
<p>Skaffold is this super slick tool that allows you to automate so much
[</p>
<p>Skaffold</p>
<p>Easy and Repeatable Container &amp; Kubernetes Development</p>
<p><img src="https://skaffold.dev/favicons/android-192x192.png" alt="">SkaffoldWarren Strange, Engineering Director, ForgeRock</p>
<p><img src="https://skaffold.dev/featured-background.jpeg" alt="">
](<a href="https://skaffold.dev">https://skaffold.dev</a>)
The issue I have is that it does not work for building docker images, as it requires either the docker daemon or the docker cli</p>
<p>There is an open issue about this, but I think it works, providing you follow the most recent comment from my self
[</p>
<p>Feature Request - Support for podman builder · Issue #8430 · GoogleContainerTools/skaffold</p>
<p>It would be great to have podman in the builders list. I have also tried using podman-docker to fake docker commands to use podman in vain (as expected). ❯ skaffold build Generating tags&hellip; - azure…</p>
<p><img src="https://github.com/fluidicon.png" alt="">GitHubGoogleContainerTools</p>
<p><img src="https://opengraph.githubassets.com/281d390ecbfd29e95c5012d81a0d1e791974ea590843d0674c4500f7aebde57a/GoogleContainerTools/skaffold/issues/8430" alt="https://github.com/GoogleContainerTools/skaffold/issues/8430">
](<a href="https://github.com/GoogleContainerTools/skaffold/issues/8430">https://github.com/GoogleContainerTools/skaffold/issues/8430</a>)</p>
<h1 id="wrapping-up">Wrapping up</h1>
<ul>
<li>I like podman</li>
<li>My manager is not sold on it</li>
<li>Saves the company some <a href="https://www.urbandictionary.com/define.php?term=dosh">dosh</a></li>
</ul>
<p>I plan to use podman as much as I can. I can run everything we have at work through podman and it&rsquo;s fine. If I have issues and need to run more complex stuff, I have a local k3s cluster I can use.</p>

                </div>
            </section>

        </article>

    </div>
</main>
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

            <article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="http://localhost:1313/post/google-artifact-registry-virtual/">
    
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">Google Artifact Registry Remote Repositories</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>What is the Google Artifact Registry remote repo and how do I use it?</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip"></div>
                            <a href="#" class="static-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span></span>
                        <span class="post-card-byline-date"><time datetime="2023-127-07">16 July 2023</time>
                            <span class="bull">&bull;</span> 3 min read</span>
                    </div>
                </footer>
    
        </div>

</article>
    
        </div>
    </div>
</aside>


        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:1313/">breadNET</a> &copy; 2023</section>
                <nav class="site-footer-nav">
                    <a href="http://localhost:1313/">Latest Posts</a>
                    
                    
                    
                    <a href="https://jonathanjanssens.com" target="_blank" rel="noopener" style="opacity: 0.5;">Hugo Casper3 by Jonathan Janssens</a>
                </nav>
            </div>
        </footer>

    </div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const nav = document.querySelector('.site-home-header .site-nav');
        const feed = document.querySelector('.post-feed');
        const header = document.querySelector('.site-home-header');

        let lastScrollY = window.scrollY;
        let ticking = false;

        function update() {
            const trigger = feed.getBoundingClientRect().top + window.scrollY - header.offsetHeight;

            if (window.scrollY >= trigger) {
                nav.classList.add('fixed-nav-active');
            } else {
                nav.classList.remove('fixed-nav-active');
            }

            ticking = false;
        }

        function onScroll() {
            lastScrollY = window.scrollY;
            if (!ticking) {
                window.requestAnimationFrame(update);
                ticking = true;
            }
        }

        function onResize() {
            if (!ticking) {
                window.requestAnimationFrame(update);
                ticking = true;
            }
        }

        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', onResize);

        update(); 
    });

</script>

</body>
</html>